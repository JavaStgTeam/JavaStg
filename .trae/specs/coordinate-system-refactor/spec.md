# JavaSTG 坐标系重构 - 产品需求文档

## 概述
- **Summary**: 重构JavaSTG游戏引擎的坐标系系统，建立一个固定尺寸为360*480的中心原点坐标系，并实现窗口拖拽和拉伸功能。
- **Purpose**: 解决当前坐标系系统中的硬编码尺寸问题，提供更灵活的窗口交互体验，同时保持弹幕游戏设计的标准坐标系。
- **Target Users**: 游戏开发人员和玩家

## Goals
- 建立固定尺寸为360*480的中心原点游戏坐标系
- 实现窗口拖拽功能，支持鼠标拖动调整窗口位置
- 实现窗口拉伸功能，支持鼠标调整窗口大小
- 当窗口分辨率与游戏坐标系不同时，自动进行拉伸适配
- 消除硬编码默认画布尺寸问题
- 保持坐标转换机制的一致性和可靠性

## Non-Goals (Out of Scope)
- 不改变中心原点坐标系的基本设计
- 不修改现有的坐标转换公式
- 不添加新的游戏逻辑功能
- 不支持窗口最大化/最小化功能
- 不实现多显示器支持

## Background & Context
- 当前JavaSTG使用中心原点坐标系，符合弹幕游戏设计惯例
- 存在硬编码默认画布尺寸问题（Obj.java中548x921，GameCanvas中800x600）
- 缺少窗口交互功能，用户体验较差
- 需要一个统一的游戏逻辑空间尺寸，便于游戏设计和开发

## Functional Requirements
- **FR-1**: 建立固定尺寸为360*480的游戏坐标系
- **FR-2**: 实现窗口拖拽功能，支持鼠标拖动调整窗口位置
- **FR-3**: 实现窗口拉伸功能，支持鼠标调整窗口大小
- **FR-4**: 当窗口分辨率与游戏坐标系不同时，自动进行拉伸适配
- **FR-5**: 消除硬编码默认画布尺寸，使用统一的配置

## Non-Functional Requirements
- **NFR-1**: 坐标转换性能良好，不应影响游戏帧率
- **NFR-2**: 窗口操作响应流畅，拖拽和拉伸过程无明显卡顿
- **NFR-3**: 代码结构清晰，符合现有代码风格
- **NFR-4**: 向后兼容，不破坏现有游戏对象的坐标使用方式

## Constraints
- **Technical**: 基于Java AWT/Swing实现，保持与现有代码的兼容性
- **Business**: 保持弹幕游戏的标准坐标系设计
- **Dependencies**: 依赖现有的CoordinateSystem类和游戏对象体系

## Assumptions
- 游戏逻辑使用360*480的固定坐标系进行计算
- 窗口分辨率可以任意调整，系统自动处理拉伸
- 所有游戏对象使用共享的坐标系统进行转换
- 窗口操作不会影响游戏的正常运行

## Acceptance Criteria

### AC-1: 固定尺寸游戏坐标系
- **Given**: 游戏启动
- **When**: 初始化坐标系统
- **Then**: 游戏坐标系固定为360*480，中心原点
- **Verification**: `programmatic`
- **Notes**: 确保所有游戏对象使用此统一坐标系

### AC-2: 窗口拖拽功能
- **Given**: 游戏窗口运行中
- **When**: 鼠标点击窗口标题栏并拖动
- **Then**: 窗口跟随鼠标移动
- **Verification**: `human-judgment`
- **Notes**: 拖动过程应流畅，释放鼠标后窗口应停留在新位置

### AC-3: 窗口拉伸功能
- **Given**: 游戏窗口运行中
- **When**: 鼠标拖动窗口边缘
- **Then**: 窗口大小随鼠标拖动调整
- **Verification**: `human-judgment`
- **Notes**: 拉伸过程应流畅，窗口内容应实时适配

### AC-4: 自动拉伸适配
- **Given**: 窗口大小与360*480不同
- **When**: 渲染游戏内容
- **Then**: 游戏内容自动拉伸以适配窗口大小
- **Verification**: `human-judgment`
- **Notes**: 拉伸应保持游戏内容的比例和布局

### AC-5: 消除硬编码尺寸
- **Given**: 查看代码
- **When**: 检查Obj.java和相关文件
- **Then**: 不存在硬编码的默认画布尺寸
- **Verification**: `programmatic`
- **Notes**: 使用统一的常量或配置

## Open Questions
- [ ] 窗口拖拽和拉伸功能是否需要在游戏运行时暂停游戏逻辑？
- [ ] 拉伸时是否需要保持游戏内容的宽高比？
- [ ] 是否需要添加窗口大小限制（最小/最大尺寸）？